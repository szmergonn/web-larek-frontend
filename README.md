# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура

Проект реализует архитектуру MVP (Model-View-Presenter), где:
- **Model** (модель) отвечает за хранение и управление данными.
- **View** (представление) отвечает за отображение данных пользователю.
- **Presenter** (презентер) связывает модель и представление, обрабатывает события и управляет данными.

### Брокер событий
#### Класс `EventEmitter`
Реализация брокера событий для связи компонентов приложения. Позволяет подписываться на события, управлять подписками и инициировать события.

**Методы:**
- `on` - подписка на событие;
- `off` - удаление подписки;
- `emit` - инициирование события;
- `onAll` - подписка на все события;
- `offAll` - удаление всех подписок;
- `trigger` - создание обработчика событий.

### Работа с API
#### Класс `Api`
Базовый клиент для взаимодействия с сервером.

**Методы:**
- `get` - выполнение GET-запроса;
- `post` - выполнение POST-запроса;
- `handleResponse` - обработка ответов сервера.

#### Класс `ExtendedApiClient`
Расширенный API-клиент для работы с каталогом товаров и заказами.

**Методы:**
- `getProduct` - получение данных о товаре по ID;
- `getProductList` - получение списка товаров;
- `postOrder` - отправка заказа.

### Модель данных
#### Класс `StoreManager`
Центральное хранилище данных приложения.

**Данные:**
- `catalog` - каталог товаров;
- `preview` - товар в режиме предпросмотра;
- `basket` - корзина товаров;
- `order` - данные заказа;
- `formErrors` - ошибки валидации.

**Методы:**
- `updateCatalog` - обновление каталога;
- `setPreview` - установка товара в предпросмотр;
- `addProductToCart` - добавление товара в корзину;
- `removeProductFromCart` - удаление товара из корзины;
- `updateContactField` - обновление контактов покупателя;
- `updateOrderField` - обновление данных заказа;
- `validateOrder` - проверка данных заказа;
- `validateContacts` - проверка данных контактов.

### Представление
#### Абстрактный класс `AbstractView`
Базовый класс для работы с элементами DOM.

**Методы:**
- `setText` - установка текста элемента;
- `setImage` - установка изображения;
- `toggleClass` - переключение CSS-класса;
- `setDisabled` - установка состояния `disabled`;
- `hideElement` - скрытие элемента;
- `showElement` - отображение элемента;
- `render` - рендеринг представления.

#### Класс `MainPage`
Отображает главную страницу с каталогом товаров и корзиной.

#### Класс `ModalWindow`
Реализует модальное окно.

#### Класс `Cart`
Отображает содержимое корзины.

#### Класс `CartItem`
Представляет отдельный товар в корзине.

#### Класс `ProductCard`
Отображает карточку товара в каталоге.

#### Класс `ProductDetail`
Отображает детальную информацию о товаре в модальном окне.

#### Класс `CheckoutForm`
Форма оформления заказа.

#### Класс `ContactForm`
Форма для ввода контактных данных покупателя.

#### Класс `OrderConfirmation`
Отображает сообщение об успешном оформлении заказа.

### Контроллер
#### Класс `AppController`
Главный контроллер приложения, связывает `StoreManager`, `ExtendedApiClient` и представления.

**Методы:**
- `initialize` - инициализация приложения;
- `handleStoreUpdate` - обработка изменений в хранилище;
- `renderCatalog` - рендеринг каталога товаров;
- `openProductDetail` - отображение деталей товара;
- `onCartClick` - обработка клика на корзину;
- `renderCart` - отображение содержимого корзины;
- `onOrderOpen` - открытие формы заказа;
- `onCheckoutFormSubmit` - обработка отправки формы заказа;
- `onContactFormSubmit` - обработка отправки формы контактов;
- `onOrderConfirmationClose` - закрытие окна подтверждения заказа.